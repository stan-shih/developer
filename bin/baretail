#!/bin/bash
function install () {
   . $DEV_HOME/etc/url.baremetal.conf
   rm -rf $BAREMETAL_HOME
   mkdir -p $BAREMETAL_HOME
   curl -L -o $BAREMETAL_HOME/baretail.exe $BAREMETAL_DOWNLOAD_URL_WINDOWS
}

usage="$(basename -- "$0") [-hi] -- BareTail Application

   Option:
      -h  show this help text
      -i  Install BareTail
"
while getopts 'hi' option; do
  case "$option" in
   h) echo "$usage"
      exit
      ;;
   i) echo "Install BareTail..."
      install
      exit
      ;;
   :) printf "missing argument for -%s\n" "$OPTARG" >&2
      echo "$usage" >&2
      exit 1
      ;;
   \?) printf "illegal option: -%s\n" "$OPTARG" >&2
      echo "$usage" >&2
      exit 1
      ;;
  esac
done
shift $((OPTIND - 1))
####
#### Main Script
####
if [ ! -d $BAREMETAL_HOME ]; then
   echo "Please install BareTail first.
   
   Execute: 
            baretail -i"
   exit 1
fi
if [[ $OS_WINDOWS == "Y" ]]; then
   if [ -f $BAREMETAL_HOME/baretailpro.exe ]; then
      start $BAREMETAL_HOME/baretailpro.exe
   else
      start $BAREMETAL_HOME/baretail.exe
   fi
elif [[ $OS_MACOS == "Y" ]]; then
   echo "Can't Support!!!"
elif [[ $OS_LINUX == "Y" ]]; then
  echo "Can't support!!!"
fi
